---
layout: default
title: Home
---

<div class='row'>
  <div class='col-md-2 nopad' id="filterbar">
  	<div class='well' id='filterplots'>
	<div>
    <h5><span class="glyphicon glyphicon-filter"></span>    Filter</h5>
	</div>
	<div class='well'>
	<h6>Select Village Allotment</h6>
	<p id="demo"></p>
	<input type="text" style="width: 100%;" id="villagesearch">
	<input id="allvillage" class="landusefilter" name="ok" type="checkbox" title="Select all" Value="everything" checked> Select all
	<div id="villagealott" >
	<table id="villagealott" class="myList">
	<tbody>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="ABBARAJUPALEM">ABBARAJUPALEM</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="ANANTHAVARAM">ANANTHAVARAM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="BORUPALEM">BORUPALEM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="DONDAPADU">DONDAPADU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="INAVOLU">INAVOLU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="KONDAMARAJUPALEM">KONDAMARAJUPALEM</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="KRISHNAYAPALEM">KRISHNAYAPALEM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="KURAGALLU">KURAGALLU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="LINGAYAPALEM">LINGAYAPALEM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="MALKAPURAM">MALKAPURAM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="MANDAMAM">MANDAMAM</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="NEERUKONDA">NEERUKONDA</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="NEKKALLU">NEKKALLU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="NELAPADU">NELAPADU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" value="NIIDAMARRU">NIIDAMARRU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="NOWLURU">NOWLURU</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="PENUMAKA">PENUMAKA</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="PITCHAKALAPALEM">PITCHAKALAPALEM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="RAYAPUDI">RAYAPUDI</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="SEKHAMURU">SEKHAMURU</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="THULLUR">THULLUR</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="UDDANDARAYUNIPALEM">UDDANDARAYUNIPALEM</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="UNDAVALLI">UNDAVALLI</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="VELAGAPUDI">VELAGAPUDI</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="villagealott" class="landusefilter" type="checkbox" Value="VENKATAPALEM">VENKATAPALEM</label>
			</td>
					
		</tr>
		</tbody>
		</table>
	</div>
    </div>
	<div class='well'>
	<h6>Select Landuse Type</h6>
	<!--<input id="alllanduse" name="alllanduse" class="landusefilter" type="checkbox" title="Select all" Value="everything"> Select all-->
	<div id="landuse filter" >
	<table id="landusefilters" class="myList1">
	<tbody>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="COMMERCIAL">COMMERCIAL</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="RESIDENTIAL">RESIDENTIAL</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="OPEN SPACES">OPEN SPACES</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="INSTITUTIONAL">INSTITUTIONAL</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="INFRASTRUCTURE">INFRASTRUCTURE</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="OTHER">OTHER</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="landuse" class="landusefilter" type="checkbox" Value="SLOI">SLOI</label>
			</td>
					
		</tr>
		</tbody>
		</table>
	</div>
	</div>
	<div class='well'>
	<h6>Price per Yard</h6>
	<div id="Budgetfilter" class="row" >
	<div class="col-md-5 text-center">
	<input id="lowprice" class="landusefilter" type="textbox" style="max-width:75px;" Value="0">
	</div>
	<div class="col-md-2 text-center" style="position:relative;">-</div>
	<div class="col-md-5 text-center">
	<input id="highprice" class="landusefilter" type="textbox" style="max-width:75px;" Value="50000">
	</div>
	</div>
	</div>
	<div class='well'>
	<h6>Extent</h6>
	<div id="Budgetfilter" class="row" >
	<div class="col-md-5 text-center">
	<input id="lowextent" class="landusefilter" type="textbox" style="max-width:75px;" Value="30">
	</div>
	<div class="col-md-2 text-center" style="position:relative;">-</div>
	<div class="col-md-5 text-center">
	<input id="highextent" class="landusefilter" type="textbox" style="max-width:75px;" Value="25000">
	</div>
	</div>
	</div>
	<div class='well'>
	<h6>PLOTNO</h6>
	<div id="Budgetfilter" class="row" >
	<div class="text-center">
	<input id="plotno" class="landusefilter" type="textbox" style="max-width:80%;" Value="">
	</div>
	</div>
	</div>
	<div class='well'>
	<h6>Facing of Plot</h6>
	<div id="Budgetfilter" >
		<tbody>
		<tr>
			<td>
				<label><input id="northface" class="landusefilter" type="checkbox" Value="1">NORTH</label>
			</td>
		</tr>
		<tr>
			<td>
				<label><input id="southface" class="landusefilter" type="checkbox" Value="1">SOUTH</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="eastface" class="landusefilter" type="checkbox" Value="1">EAST</label>
			</td>
					
		</tr>
		<tr>
			<td>
				<label><input id="westface" class="landusefilter" type="checkbox" Value="1">WEST</label>
			</td>
					
		</tr>
		</tbody>
		</table>
	</div>
	</div>
	</div>
    <div class="form-group well" id='findaddress'>
    <h6>Address Lookup <small>(<a id='findMe' href='#'>Use my current Location</a>)</small></h6>
	<div class='row well'>
	<div class='col-md-8 nopad'>
    <input class='form-control ' id='search_address' placeholder='Enter an address' type='text'>
	</div>
	<div class='col-md-4 nopad'>
	 <button class='btn btn-default btn-xs ' id='btnSearch' type='button'>
     <i class='fa fa-search'></i>
    </button>
    <button class='btn btn-default btn-xs ' id='reset'>
    <i class='fa fa-refresh'></i>
    </button>
	</div>
	</div>
    </div>
    <div class='well'>
      <h5>
        Zoning Districts
        <small>(<a href='/zones'>what's that?</a>)</small>
      </h5>
      <div class='row'>
        <div class='col-sm-5'>
          <ul class='list-unstyled zones'>
            <li>
              <label data-content='Houses and apartment buildings. No stores, offices, or factories are allowed. Most Schools, churches, police stations and the like are ok, though.'>
                <img alt='Residential' src='/images/icons/residential.png'>
                Residential
              </label>
            </li>
            <li>
              <label data-content='From bodegas to big boxes, these districts are for stores and offices. Residences are also permitted in most commercial districts'>
                <img alt='Commercial' src='/images/icons/commercial.png'>
                Commercial
              </label>
            </li>
            <li>
              <label data-content="Various industrial uses from warehouse and distribution centers to film production studios and ferry and ship terminals">
                <img alt='Industrial' src='/images/icons/industrial.png'>
                Manufacturing
              </label>
            </li>
          </ul>
        </div>
        <div class='col-sm-7'>
          <ul class='list-unstyled zones'>
            <li>
              <label data-content='Public Parks'>
                <img alt='Parks and Open Space' src='/images/icons/parks-entertainment.png'>
                Parks and Open Space
              </label>
            </li>
            <li>
              <label data-content='Commericial Overlays allow for light commerical use in residential areas along busy corridors'>
                <div class='legendIcon co'></div>
                Commercial Overlay Districts
              </label>
            </li>
            <li>
              <label data-content='Areas with special rules to achieve urban planning and design objectives'>
                <div class='legendIcon sp'></div>
                Special Purpose Districts
              </label>
            </li>
            <li>
              <label data-content='Areas where new buildings have additional limits on height'>
                <div class='legendIcon lh'></div>
                Limited Height Districts
              </label>
            </li>
			<li>
              <label data-content='Areas where new buildings have additional limits on height'>
                <div class='legendIcon fs'></div>
                Fire Services
              </label>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class='col-md-10 nopad' id='mapholder'>
    <div id='mapCanvas'>
	</div>
    <!-- <span class='pull-right'>
      
    </span> -->
  </div>
</div>

<style id="landuse-style">
#layer {
  polygon-fill: ramp([plot_spe_1], (#5F4690, #1D6996, #38A6A5, #0F8554, #73AF48, #EDAD08, #E17C05, #CC503E, #94346E, #6F4070, #666666), ("R2", "C2", "R1", "C1", "P2", "U1", "S3", "P1", "S2", "O"), "=");
  line-width: 1;
  line-color: #FFF;
  line-opacity: 0.5;
}
</style>
<style id="internal_roads-style">
#layer {
  polygon-fill: #e0feff;
  polygon-opacity: 0.5;
  line-width: 0;
  line-color: #ffffff;
  line-opacity: 0.7;
}
</style>
<style id="commercial-style">
#layer::z1{
  polygon-fill: #0000ff;
  polygon-opacity: .2;
  line-color: #0000ff;
  line-width: 2;
  line-opacity: .8;
}
</style>
<style id="splayer-style">
#nysp{
  polygon-fill: #FF6600;
  polygon-opacity: 0.2;
  line-color: #FF5C00;
  line-width: 2;
  line-opacity: .8;
}
</style>
<style id="fslayer-style">
#nysp{
  marker-width: 5;
  marker-fill: #ec0000;
  marker-fill-opacity: 0.6;
  marker-allow-overlap: true;
  marker-line-width: 1;
  marker-line-color: #ffffff;
  marker-line-opacity: 0.38;
  marker-comp-op: multiply;
}
</style>

<script>
function checkCheckboxList(list) {
    var ch = 0;
    var uch = 0;

    list.each(function() {
        if ($(this).find('input[type="checkbox"]').is(':checked')) {
            ch++;
        } else {
            uch++;
        }
    });
    if (ch === list.length) {
        return 1;
    } else if (uch === list.length) {
        return 2;
    } else {
        return 0;
    }
}

function setCheckbox(element, rows) {
    rows.each(function() {
        $(this).find('input[type="checkbox"]').click(function() {
            var checkresult = checkCheckboxList(rows);
            if (checkresult === 1) {
                $(element).prop("indeterminate", false);
                $(element).prop("checked", true);
            } else if (checkresult === 2) {
                $(element).prop("indeterminate", false);
                $(element).prop("checked", false);
            } else {
                $(element).prop("indeterminate", true);
            }
        });
    });
    var checkresult = checkCheckboxList(rows);
    if (checkresult === 1) {
        $(element).prop("indeterminate", false);
        $(element).prop("checked", true);
    } else if (checkresult === 2) {
        $(element).prop("indeterminate", false);
        $(element).prop("checked", false);
    } else {
        $(element).prop("indeterminate", true);
    }
}

function getList(element) {
    var $rows = $(element).next().next().find("table.myList tr");
    setCheckbox($(element).next(), $rows);
    return $rows;
}

function suggest(element, lastinput, list) {
    $(element).keyup(function() {
        var sValue = $.trim($(element).val());
        if (lastinput == sValue) {
            return;
        }
        if (sValue === '') {
            list.show();
        } else {
            list.each(function() {
                var oLabel = $(this).find('label');
                if (oLabel.length > 0) {
                    if (oLabel.text().toLowerCase().indexOf(sValue.toLowerCase()) >= 0) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                }
            });
            lastinput = sValue;
        }
    });
}

function clearList(element) {
    $(element).click(function() {
        if ($(this).is(':checked')) {
            $(element).next().find('table.myList tr input[type="checkbox"]').prop("checked", true);
        } else {
            $(element).next().find('table.myList tr input[type="checkbox"]').prop("checked", false);
        }
    });
}

$(function() {
    var $tableRows = getList('input#villagesearch');
    var $lastInput = '';
    suggest('input#villagesearch', $lastInput, $tableRows);
    clearList('input#allvillage');
});
</script>

<script>
$('input[class="landusefilter"]').change(function() {
   loadfilter();
});

$(window).load(function(){
  loadfilter();
});

function loadfilter() {
		var query = "";
		try {
		CartoDbLib.map.removeLayer(CartoDbLib.landuse);
		}
		catch(err) {
		}
		if ($('#allvillage').is(':checked')) {
			query = "where 1=1"
		}
		else {
			var array = $.map($('input[id="villagealott"]:checked'), function(c){return c.value; })
			query = "where plot_allot IN ('"+array.toString().replace(/,/g, "','")+"')";
		}
		if ($('#alllanduse').is(':checked')) {
			query = query;
		}
		else {
			var array = $.map($('input[id="landuse"]:checked'), function(c){return c.value; })
			query = query+" and plot_gener IN ('"+array.toString().replace(/,/g, "','")+"')";
		}
	    var layerStyle = $('#landuse-style').text();
        cartodb.createLayer(CartoDbLib.map, {
          user_name: 'dev',
          type: 'cartodb',
          sublayers: [{
            sql: "SELECT * FROM landuse " + query,
            cartocss: layerStyle,
          }],
		  extra_params: {
			  map_key: "c6d0788f0f96c7db86fedfff84594aa60d2f8c08"
		  }
        }).done(function(layer) {
			var sublayer = layer.getSubLayer(0);
			var firstSQL = sublayer.getSQL();
			sublayer.setInteraction(true);
			sublayer.setInteractivity('cartodb_id,plot_no,plot_speci');
			sublayer.on('featureOver', function(e, latlng, pos, data, subLayerIndex) {
            $('#mapCanvas div').css('cursor','pointer');
            CartoDbLib.coinfo.update(data);
            console.log(data);
			});

			sublayer.on('featureOut', function(e, latlng, pos, data, subLayerIndex) {
            $('#mapCanvas div').css('cursor','inherit');
            CartoDbLib.coinfo.clear();
          });
		  CartoDbLib.landuse = layer;
		  sql = cartodb.SQL({ user: 'dev' });
          sql.getBounds(firstSQL).done(function(bounds){
          CartoDbLib.map.fitBounds(bounds);
		  });
        }).addTo(CartoDbLib.map);
}

</script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&v=3.17"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="/js/cartodb.js"></script>
<script src="//cdn.maptiks.com/maptiks-leaflet.min.js"></script>
<script type="text/javascript" src="/js/leaflet-google.js" ></script>
<script type="text/javascript" src="/js/jquery.address.js"></script>
<script type="text/javascript" src="/js/cartodb_lib.js"></script>
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
<script type="text/javascript" src="/js/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="/js/jquery.csv.min.js" ></script>
<script type="text/javascript" src="/js/map.js"></script>